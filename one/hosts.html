<!doctype html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>ONE Insight - Host Usage</title>    
    <script type="text/javascript" src="js/raphael-min.js"></script>    
    <script type="text/javascript" src="js/jquery-1.11.0.min.js"></script>    
  </head>
  <body>
  
	<!-- the html element where to put the paper -->
	<div id="HostLoad"></div>
	
	<!-- a script that create's a paper and a rectangle -->
	<script type="text/javascript">
	$(document).ready(  
 	function()
 	{
      $.ajax( 
      {
         type: "GET",
         url: "onehost.xml",
         dataType: "xml",
         success: function(xml) 
         {
             $(xml).find('methodResponse').find('data').each(
             function()
             {
               if ($(this).find('boolean').text() == 1) 
               {
                 var paper = Raphael(10, 50, 500, 500);
                 var CORE_UNIT = 10;
                 var ITEM_MARGIN = 2;
                 var curTop = 0;
                 var curLeft = 0;
                 $( $.parseXML( $(this).find('string').text() ) ).find('HOST').each(   
                 function()
                 {
                   var nbCpu = $(this).find('MAX_CPU').text() / 100;
                   var nbRow = Math.ceil(nbCpu / 4);
                   for (var item=0; item< nbCpu; ++item) {
                     var coreSideWidth = CORE_UNIT + ITEM_MARGIN;
                     paper.rect(curLeft + 1, curTop + 1, coreSideWidth, coreSideWidth);
                     curLeft += coreSideWidth + ITEM_MARGIN;
                   }
                   //curTop += itemHeight;
 /*                console.log($(this).find('ID').text());
                   console.log($(this).find('NAME').text());
                   console.log($(this).find('RUNNING_VMS').text());
                   console.log($(this).find('MAX_MEM').text());
                   console.log($(this).find('FREE_MEM').text());
                   console.log($(this).find('FREE_CPU').text());
*/                   
                 });     
              }               
           }
         );
        }
      });
    }
   );
</script>
	

	
  </body>
</html>
